
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the Atomist Developer Platform">
      
      
      
        <meta name="author" content="The Atomist Team">
      
      
        <link rel="shortcut icon" href="../../../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.4">
    
    
      
        <title>Editors - The Atomist Documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="green" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../.." title="The Atomist Documentation" class="md-logo md-header-nav__button">
            <img src="../../../images/atomist-logo-horiz-reversed.svg" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  User Guide
                </span>
              
                <span class="md-header-nav__parent">
                  Rug
                </span>
              
            
            Editors
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/atomist/rug" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Rug
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../../images/atomist-logo-horiz-reversed.svg">
      </i>
    
    The Atomist Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/atomist/rug" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Rug
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../capabilities/" title="Capabilities" class="md-nav__link">
      Capabilities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/slack/" title="Connect Atomist to Slack" class="md-nav__link">
      Connect Atomist to Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/github/" title="Connect Atomist to GitHub" class="md-nav__link">
      Connect Atomist to GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Connect Atomist to CI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Connect Atomist to CI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/ci/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/travis-ci/" title="Travis CI" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/bot/" title="Atomist Bot" class="md-nav__link">
      Atomist Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/what-next/" title="What next" class="md-nav__link">
      What next
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/setup-cli/" title="Setup Rug CLI" class="md-nav__link">
      Setup Rug CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/create-rug-project/" title="Create Rug Project" class="md-nav__link">
      Create Rug Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/setup-typescript/" title="Setup TypeScript" class="md-nav__link">
      Setup TypeScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/publish-rug-project/" title="Publish Rug Project" class="md-nav__link">
      Publish Rug Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/add-bot-command/" title="Add Bot Command" class="md-nav__link">
      Add Bot Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-2">
      Rug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Rug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event-handlers/" title="Event Handlers" class="md-nav__link">
      Event Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-handlers/" title="Command Handlers" class="md-nav__link">
      Command Handlers
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Editors
      </label>
    
    <a href="./" title="Editors" class="md-nav__link md-nav__link--active">
      Editors
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-an-editor" title="Anatomy of an Editor" class="md-nav__link">
    Anatomy of an Editor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-editor" title="A Basic Editor" class="md-nav__link">
    A Basic Editor
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../generators/" title="Generators" class="md-nav__link">
      Generators
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rug-functions/" title="Rug Functions" class="md-nav__link">
      Rug Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secrets/" title="Secrets" class="md-nav__link">
      Secrets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../path-expressions/" title="Path Expressions" class="md-nav__link">
      Path Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microgrammars/" title="Microgrammars" class="md-nav__link">
      Microgrammars
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="Tests" class="md-nav__link">
      Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../archives/" title="Archives" class="md-nav__link">
      Archives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../runtime/" title="Runtime" class="md-nav__link">
      Runtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conventions/" title="Conventions" class="md-nav__link">
      Conventions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/slack/" title="Slack" class="md-nav__link">
      Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/github/" title="GitHub.com" class="md-nav__link">
      GitHub.com
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/travis-ci/" title="Travis CI" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/bot/" title="Bot" class="md-nav__link">
      Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-3" type="checkbox" id="nav-4-4-3">
    
    <label class="md-nav__link" for="nav-4-4-3">
      CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-3">
        CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/using-rugs/" title="Using Rugs" class="md-nav__link">
      Using Rugs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/developing-rugs/" title="Developing Rugs" class="md-nav__link">
      Developing Rugs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fingerprints/" title="Fingerprints" class="md-nav__link">
      Fingerprints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../seeds/" title="Seeds" class="md-nav__link">
      Seeds
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../spring-agent/" title="Spring Agent" class="md-nav__link">
      Spring Agent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Permissions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Permissions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/slack/" title="Slack Scopes" class="md-nav__link">
      Slack Scopes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/github/" title="GitHub Scopes" class="md-nav__link">
      GitHub Scopes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Rug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Rug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/path-expressions/" title="Path Expressions" class="md-nav__link">
      Path Expressions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug-cli/" title="Rug CLI" class="md-nav__link">
      Rug CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-an-editor" title="Anatomy of an Editor" class="md-nav__link">
    Anatomy of an Editor
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-editor" title="A Basic Editor" class="md-nav__link">
    A Basic Editor
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Editors</h1>
                
                <p>The most common task performed on a daily basis is to change the code of a
project. Those updates can target a single file but can also refer to many
resources.</p>
<p>Rug editors automate updates, from the simplest to most complex.</p>
<h2 id="anatomy-of-an-editor">Anatomy of an Editor<a class="headerlink" href="#anatomy-of-an-editor" title="Permanent link">&para;</a></h2>
<p>Assume our team has an existing Spring Boot Rest project cloned or copied/pasted
from in other projects. These manual actions are brittle at best and usually
ends up with team members wondering what they did wrong.</p>
<p>Let&rsquo;s suppose however that project is already a Rug project, it would still
be a running Spring Boot project in its own right. Here is such a project:</p>
<div class="codehilite"><pre><span></span><span class="go">~/workspace/spring-boot-rest-basic</span>
<span class="go">    ├── .atomist</span>
<span class="go">    │   ├── editors</span>
<span class="go">    │   │   └── NewSpringBootService.ts</span>
<span class="go">    │   ├── .gitignore</span>
<span class="go">    │   ├── package.json</span>
<span class="go">    │   ├── tests</span>
<span class="go">    │   │   ├── project</span>
<span class="go">    │   │   │   ├── NewSpringBootService.feature</span>
<span class="go">    │   │   └── └── Steps.ts</span>
<span class="go">    │   └── tsconfig.json</span>
<span class="go">    ├── .atomist.yml</span>
<span class="go">    ├── .gitignore</span>
<span class="go">    ├── pom.xml</span>
<span class="go">    ├── .project</span>
<span class="go">    ├── README.md</span>
<span class="go">    ├── src</span>
<span class="go">    │   ├── main</span>
<span class="go">    │   │   ├── java</span>
<span class="go">    │   │   │   └── com</span>
<span class="go">    │   │   │       └── company</span>
<span class="go">    │   │   │           ├── HomeController.java</span>
<span class="go">    │   │   │           ├── MyRestServiceApplication.java</span>
<span class="go">    │   │   │           └── MyRestServiceConfiguration.java</span>
<span class="go">    │   │   └── resources</span>
<span class="go">    │   │       ├── application.properties</span>
<span class="go">    │   │       └── logback.xml</span>
<span class="go">    │   └── test</span>
<span class="go">    │       └── java</span>
<span class="go">    │           └── com</span>
<span class="go">    │               └── company</span>
<span class="go">    │                   ├── MyRestServiceApplicationTests.java</span>
<span class="go">    │                   ├── MyRestServiceOutOfContainerIntegrationTests.java</span>
<span class="go">    │                   └── MyRestServiceWebIntegrationTests.java</span>
<span class="go">    └── .travis.yml</span>
</pre></div>

<p>However, rather than copying bits and pieces, the team could codify the
development automation tasks into Rug editors that could be tested and
evolved as the team would need it.</p>
<p>Editors live in the <code>.atomist/editors</code> directory and their tests in the
<code>.atomist/tests</code> directory. The <code>NewSpringBootService.ts</code> is the generator from
the <a href="../generators/">Rug generator section</a>, editors live alongside it deminstrating we can
codify not only the inception of a project but its evolution as well.</p>
<p>Let&rsquo;s go through one of those Rug editors in the next section.</p>
<h2 id="a-basic-editor">A Basic Editor<a class="headerlink" href="#a-basic-editor" title="Permanent link">&para;</a></h2>
<p>Let&rsquo;s suppose we need to automate the task of adding a controller to a Spring
Boot service. That controller will respond to requests for the <code>/calendar</code>
endpoint.</p>
<p>Before we can dive into the editor itself, let&rsquo;s review what&rsquo;s needed here:</p>
<ul>
<li>Add a new class under <code>src/main/java/com/company</code></li>
<li>Decorate that class with the <code class="codehilite"><span class="nd">@RestController</span></code> and
  <code class="codehilite"><span class="nd">@RequestMapping</span></code> decorators</li>
<li>Indicate the endpoint at which this controller takes place: <code>/calendar</code></li>
</ul>
<p>These tasks are what we are going to encode in a Rug editor.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">EditProject</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/ProjectEditor&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Editor</span><span class="p">,</span> <span class="nx">Parameter</span><span class="p">,</span> <span class="nx">Tags</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/Decorators&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Pattern</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/RugOperation&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/model/Project&#39;</span><span class="p">;</span>

<span class="kd">@Editor</span><span class="p">(</span><span class="s2">&quot;AddSpringBootRestController&quot;</span><span class="p">,</span> <span class="s2">&quot;adds a new REST controller to a Spring Boot project&quot;</span><span class="p">)</span>
<span class="kd">@Tags</span><span class="p">(</span><span class="s2">&quot;spring&quot;</span><span class="p">,</span> <span class="s2">&quot;spring boot&quot;</span><span class="p">,</span> <span class="s2">&quot;rest&quot;</span><span class="p">)</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AddSpringBootRestController</span> <span class="kr">implements</span> <span class="nx">EditProject</span> <span class="p">{</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Class Name&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;name for the controller class&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.java_class</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid Java class name&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
        <span class="nx">maxLength</span>: <span class="kt">50</span>
    <span class="p">})</span>
    <span class="nx">controller_class_name</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Path at which the request will be served&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;REST endpoint&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.any</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid HTTP path&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="nx">endpoint</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="nx">edit</span><span class="p">(</span><span class="nx">project</span>: <span class="kt">Project</span><span class="p">)</span> <span class="p">{</span>

        <span class="kr">const</span> <span class="nx">rawJavaFileContent</span> <span class="o">=</span> <span class="sb">`package com.company;</span>
<span class="sb">import org.springframework.web.bind.annotation.RequestMapping;</span>
<span class="sb">import org.springframework.web.bind.annotation.RestController;</span>

<span class="sb">@RestController</span>
<span class="sb">@RequestMapping(value=&quot;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">&quot;)</span>
<span class="sb">public class </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">controller_class_name</span><span class="si">}</span><span class="sb">Controller {</span>
<span class="sb">}`</span><span class="p">;</span>

        <span class="nx">project</span><span class="p">.</span><span class="nx">addFile</span><span class="p">(</span><span class="sb">`src/main/java/com/company/</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">controller_class_name</span><span class="si">}</span><span class="sb">Controller.java`</span><span class="p">,</span> <span class="nx">rawJavaFileContent</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">addSpringBootRestController</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AddSpringBootRestController</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>The first few lines group the Rug typings our script will be using throughout
(lines 1&ndash;4). Next, we declare our editor through TypeScript <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">decorators</a>
(line 6). The first argument of the <code class="codehilite"><span class="kd">@Editor</span></code> decorator is the name
of the editor. This the public visible and discoverable name of the Rug. This
name, along with the editors group and repository, form the fully-qualified name
of the editor. The second argument of the <code class="codehilite"><span class="kd">@Editor</span></code> decorator is a
short description of the editor. The following line uses the
<code class="codehilite"><span class="kd">@Tags</span></code> decorator to apply some tags to our editor so people can
search for it more easily. Using the <code class="codehilite"><span class="kd">@Tags</span></code> decorator is optional
but highly recommended.</p>
<p>We then define the class which implements our editor (line 8). An editor
implements the <code class="codehilite"><span class="nx">EditProject</span></code> interface. That interface requires the
<code class="codehilite"><span class="nx">edit</span><span class="p">(</span><span class="nx">Project</span><span class="p">)</span></code> method to be defined (line 28). It is convention
for the editor and the class that implements it to have the same name.</p>
<p>You will likely want to customize your Rugs&rsquo; input to tune their output
according to user-supplied values. Such customization is achieved through
parameters that your editor must declare in the class via the
<code class="codehilite"><span class="kd">@Parameter</span></code> decorator. This decorator
provides all the metadata of the parameter whereas the decorated variable
declaration provides its name and default value, if any. The
<code class="codehilite"><span class="kd">@Parameter</span></code> decorator accepts a single argument, a JavaScript
object. That object accepts <a href="../conventions/#parameters">properties</a> documented in the Rug
conventions but, only the <code>pattern</code> property is required. A pattern
is an <a href="http://www.regular-expressions.info/anchors.html">anchored</a> regular expression that validates the input. Here we rely on
the <code class="codehilite"><span class="nx">Pattern</span><span class="p">.</span><span class="nx">any</span></code> and <code class="codehilite"><span class="nx">Pattern</span><span class="p">.</span><span class="nx">java_class</span></code> patterns
bundled by Atomist in the TypeScript dependencies.</p>
<p>The <code class="codehilite"><span class="nx">edit</span></code> method takes a single argument, a
<code class="codehilite"><span class="nx">Project</span></code> object. That object gives you access to the entire
structure and content of the project your editor is applied to. Use it to access
and update the content of any resource in that project according to the goal of
your editor. You have the full power of TypeScript and the Rug programming model
and [language extensions][langext] to achieve this.</p>
<p>As we can see, in this example, we simply create the content of the controller
class customizing it from the parameters before saving that content in the
appropriate file in the project.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In a real Rug editor, you would want to also parameterize the package
path as your users may have changed it in their own project.</p>
</div>
<p>A Rug should always be accompanied by one or more <a href="../tests/">tests</a>. Here, this is what
a basic test could look like. First the feature descriving the test scenario
for that editor:</p>
<div class="codehilite"><pre><span></span><span class="k">Feature:</span><span class="nf"> Add a new REST Controller to a Spring Boot project</span>

<span class="k">Scenario:</span><span class="nf"> A new controller class should be added</span>
<span class="k"> Given </span><span class="nf">an empty project</span>
<span class="nf"> </span><span class="k">When </span><span class="nf">adding a new controller</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the controller class should be created</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the controller class has the supplied name</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the controller class has the supplied endpoint</span>
</pre></div>

<p>The implementation of such test goes into <code>.atomist/tests/Steps.ts</code>:</p>
<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Given</span><span class="p">,</span> <span class="nx">When</span><span class="p">,</span> <span class="nx">Then</span><span class="p">,</span> <span class="nx">ProjectScenarioWorld</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/project/Core&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Result</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/Result&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/model/Project&quot;</span><span class="p">;</span>

<span class="nx">When</span><span class="p">(</span><span class="s2">&quot;adding a new controller&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">,</span> <span class="nx">world</span>: <span class="kt">ProjectScenarioWorld</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">generator</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">generator</span><span class="p">(</span><span class="s2">&quot;NewSpringBootService&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">generateWith</span><span class="p">(</span><span class="nx">generator</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;service_class_name&quot;</span><span class="o">:</span> <span class="s2">&quot;CalendarService&quot;</span><span class="p">});</span>

  <span class="kd">let</span> <span class="nx">editor</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">editor</span><span class="p">(</span><span class="s2">&quot;AddSpringBootRestController&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">editWith</span><span class="p">(</span><span class="nx">editor</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;endpoint&#39;</span><span class="o">:</span> <span class="s1">&#39;/calendar&#39;</span><span class="p">,</span> <span class="s1">&#39;controller_class_name&#39;</span><span class="o">:</span> <span class="s1">&#39;Calendar&#39;</span><span class="p">})</span>
<span class="p">});</span>

<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the controller class should be created&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarController.java&quot;</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the controller class has the supplied name&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarController.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarController&quot;</span><span class="p">)</span>
<span class="p">);</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the controller class has the supplied endpoint&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarController.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;/calendar&quot;</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>

<p>Such a test should pass when executed:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> rug <span class="nb">test</span>
<span class="go">Resolving dependencies for com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="go">Invoking TypeScript Compiler on ts script sources</span>
<span class="go">  Created .atomist/tests/Steps.js.map</span>
<span class="go">  Created .atomist/tests/Steps.js</span>
<span class="go">  Created .atomist/editors/AddSpringBootRestController.js</span>
<span class="go">  Created .atomist/editors/AddSpringBootRestController.js.map</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js.map</span>
<span class="go">Processing script sources completed</span>
<span class="go">Loading com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="hll"><span class="go">  Executing feature Add a new REST Controller to a Spring Boot project</span>
</span><span class="hll"><span class="go">    Executing test scenario A new controller class should be added</span>
</span><span class="go">  Creating project_name</span>
<span class="go">  Executing feature Creating new Spring Rest Service projects</span>
<span class="go">    Executing test scenario A default Spring Rest project structure should be generated</span>
<span class="go">  Creating project_name</span>
<span class="go">Running tests in com.company.rugs:spring-boot-service:0.13.0:local completed</span>

<span class="go">Successfully executed 2 of 2 tests: Test SUCCESS</span>
</pre></div>

<p>Although this editor is useful, if we stopped there, its users would still
have to implement the REST endpoints in that controller by hand. As Atomist
can navigate code as we much as filesystem, we certainly can add a new editor
that does just that. Here such an editor:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">EditProject</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/ProjectEditor&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Editor</span><span class="p">,</span> <span class="nx">Parameter</span><span class="p">,</span> <span class="nx">Tags</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/Decorators&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Pattern</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/RugOperation&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/model/Project&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">PathExpressionEngine</span><span class="p">,</span> <span class="nx">TextTreeNode</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/tree/PathExpression&#39;</span><span class="p">;</span>

<span class="kd">@Editor</span><span class="p">(</span><span class="s2">&quot;AddSpringBootRestControllerRequestMapping&quot;</span><span class="p">,</span> <span class="s2">&quot;adds a new endpoint mapping to a REST controller&quot;</span><span class="p">)</span>
<span class="kd">@Tags</span><span class="p">(</span><span class="s2">&quot;spring&quot;</span><span class="p">,</span> <span class="s2">&quot;spring boot&quot;</span><span class="p">,</span> <span class="s2">&quot;rest&quot;</span><span class="p">)</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">AddSpringBootRestControllerRequestMapping</span> <span class="kr">implements</span> <span class="nx">EditProject</span> <span class="p">{</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Controller Name&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;name for the controller class&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.java_class</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid Java class name&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
        <span class="nx">maxLength</span>: <span class="kt">50</span>
    <span class="p">})</span>
    <span class="nx">controller_name</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Method Name&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;name for the method to add&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.java_identifier</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid Java method name&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
        <span class="nx">maxLength</span>: <span class="kt">50</span>
    <span class="p">})</span>
    <span class="nx">method_name</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Path at which the request will be served under the controller&#39;s endpoint&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;REST endpoint&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.any</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid HTTP path&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
    <span class="p">})</span>
    <span class="nx">endpoint</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="nx">edit</span><span class="p">(</span><span class="nx">project</span>: <span class="kt">Project</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">let</span> <span class="nx">eng</span>: <span class="kt">PathExpressionEngine</span> <span class="o">=</span> <span class="nx">project</span><span class="p">.</span><span class="nx">context</span><span class="p">().</span><span class="nx">pathExpressionEngine</span><span class="p">();</span>

        <span class="nx">eng</span><span class="p">.</span><span class="kd">with</span><span class="o">&lt;</span><span class="nx">TextTreeNode</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">project</span><span class="p">,</span> <span class="sb">`/src//File()[@name=&quot;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">controller_name</span><span class="si">}</span><span class="sb">.java&quot;]/JavaFile()//classDeclaration`</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=&gt;</span> <span class="p">{</span>
            <span class="nx">f</span><span class="p">.</span><span class="nx">update</span><span class="p">(</span><span class="sb">`@RequestMapping(value=&quot;/</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">endpoint</span><span class="si">}</span><span class="sb">&quot;, method=RequestMethod.GET)</span>
<span class="sb">    public String </span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">method_name</span><span class="si">}</span><span class="sb">() {</span>
<span class="sb">        throw new UnsupportedOperationException(&quot;No implemented&quot;);</span>
<span class="sb">    }`</span><span class="p">);</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kr">export</span> <span class="kr">const</span> <span class="nx">addSpringBootRestControllerRequestMapping</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AddSpringBootRestControllerRequestMapping</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>This editor follows the same structure as explained earlier, it&rsquo;s interesting
part is its body which demonstrates the power of <a href="../path-expressions/">path expressions</a> to
query note the filesystem but code structures as well. Let&rsquo;s deconstruct the
path expression declared here:</p>
<div class="codehilite"><pre><span></span><span class="sb">`/src//File()[@name=&quot;</span><span class="si">${</span><span class="k">this</span><span class="p">.</span><span class="nx">controller_name</span><span class="si">}</span><span class="sb">.java&quot;]/JavaFile()//classDeclaration`</span>
</pre></div>

<p>Starting from the <code>src</code> top-level directory of the project, we search for the
Java file the user targets via the editor&rsquo;s parameter
<code class="codehilite"><span class="nx">controller_name</span></code>. Once that file is found, we inform the Rug
runtime to switch to parsing that file, using the <code>JavaFile()</code> language
extension, so we can navigate its content through an AST-based tree model. The
<code>//classDeclaration</code> segment tells the expression engine to look for all classes
in that tree. Since we are in a Java file, we retrieve the only top-level class
it contains.</p>
<div class="admonition tip">
<p class="admonition-title">ANTLR to the rescue</p>
<p>The Rug runtime relies on well-known <a href="http://www.antlr.org/">ANTLR grammars</a> to parse
languages like Java, C# or Python. The <code>//classDeclaration</code> segment is a
direct rule of the <a href="https://github.com/antlr/grammars-v4/blob/master/java8/Java8.g4">Java8 grammar</a>. You do not need to install
ANTLR as it is provided by the Rug runtime.</p>
</div>
<p>Once we have found the class we are interested in updating, we can indeed add
the method&rsquo;s definition as per the user-supplied parameters. This changes is
automatically saved to disk and our class is now updated with the appropriate
method.</p>
<p>We obviously tested that editor as explained above through a BDD feature and
scenario which steps are implemented in <code>.atomist/tests/Steps.ts</code>.</p>
<div class="codehilite"><pre><span></span><span class="k">Feature:</span><span class="nf"> Add a new endpoint to a REST Controller in a Spring Boot project</span>

<span class="k">Scenario:</span><span class="nf"> A new endpoint meyhod should be added</span>
<span class="k"> Given </span><span class="nf">an empty project</span>
<span class="nf"> </span><span class="k">When </span><span class="nf">adding a new endpoint to a controller</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the endpoint method should be created in the controller class</span>
</pre></div>

<div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Given</span><span class="p">,</span> <span class="nx">When</span><span class="p">,</span> <span class="nx">Then</span><span class="p">,</span> <span class="nx">ProjectScenarioWorld</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/project/Core&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Result</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/Result&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/model/Project&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">File</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/model/File&quot;</span><span class="p">;</span>

 <span class="nx">When</span><span class="p">(</span><span class="s2">&quot;adding a new endpoint to a controller&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">,</span> <span class="nx">world</span>: <span class="kt">ProjectScenarioWorld</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">generator</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">generator</span><span class="p">(</span><span class="s2">&quot;NewSpringBootService&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">generateWith</span><span class="p">(</span><span class="nx">generator</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;service_class_name&quot;</span><span class="o">:</span> <span class="s2">&quot;CalendarService&quot;</span><span class="p">});</span>

  <span class="kd">let</span> <span class="nx">controller</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">editor</span><span class="p">(</span><span class="s2">&quot;AddSpringBootRestController&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">editWith</span><span class="p">(</span><span class="nx">controller</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;endpoint&#39;</span><span class="o">:</span> <span class="s1">&#39;/calendar&#39;</span><span class="p">,</span> <span class="s1">&#39;controller_class_name&#39;</span><span class="o">:</span> <span class="s1">&#39;Calendar&#39;</span><span class="p">})</span>

  <span class="kd">let</span> <span class="nx">editor</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">editor</span><span class="p">(</span><span class="s2">&quot;AddSpringBootRestControllerRequestMapping&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">editWith</span><span class="p">(</span><span class="nx">editor</span><span class="p">,</span> <span class="p">{</span>
      <span class="s1">&#39;endpoint&#39;</span><span class="o">:</span> <span class="s1">&#39;/today&#39;</span><span class="p">,</span>
      <span class="s1">&#39;method_name&#39;</span><span class="o">:</span> <span class="s1">&#39;getToday&#39;</span><span class="p">,</span>
      <span class="s1">&#39;controller_name&#39;</span><span class="o">:</span> <span class="s1">&#39;CalendarController&#39;</span>
    <span class="p">})</span>
<span class="p">});</span>

<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the endpoint method should be created in the controller class&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">f</span>: <span class="kt">File</span> <span class="o">=</span> <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarController.java&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">f</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;/today&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="nx">f</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;getToday&quot;</span><span class="p">);</span>
<span class="p">});</span>
</pre></div>

<div class="admonition tip">
<p class="admonition-title">Compose your Rugs!</p>
<p>Notice how we compose by using the generator we declared in the
<a href="../generators/">generators</a> section a well as our first editor described above. This is a
well-known convention when writing Rugs that we encourage you to follow.</p>
</div>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../command-handlers/" title="Command Handlers" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Command Handlers
              </span>
            </div>
          </a>
        
        
          <a href="../generators/" title="Generators" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Generators
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2017 Atomist, Inc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://the-composition.com/" class="md-footer-social__link fa fa-medium"></a>
    
      <a href="https://github.com/atomist" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/atomist" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://join.atomist.com/" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-c35428f87f.js"></script>
      
      
      <script>app.initialize({url:{base:"../../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-74966852-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>