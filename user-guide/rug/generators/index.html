
<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Documentation for the Atomist Developer Platform">
      
      
      
        <meta name="author" content="The Atomist Team">
      
      
        <link rel="shortcut icon" href="../../../images/favicon.ico">
      
      <meta name="generator" content="mkdocs-0.16.3, mkdocs-material-1.7.4">
    
    
      
        <title>Generators - The Atomist Documentation</title>
      
    
    
      <script src="../../../assets/javascripts/modernizr-1df76c4e58.js"></script>
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application-769c285a91.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/application-02c2a4388f.palette.css">
      
    
    
      
        
        
        
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    
  </head>
  
  
  
  
    <body data-md-color-primary="green" data-md-color-accent="green">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <a href="../../.." title="The Atomist Documentation" class="md-logo md-header-nav__button">
            <img src="../../../images/atomist-logo-horiz-reversed.svg" width="24" height="24">
          </a>
        
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <span class="md-flex__ellipsis md-header-nav__title">
          
            
              
                <span class="md-header-nav__parent">
                  User Guide
                </span>
              
                <span class="md-header-nav__parent">
                  Rug
                </span>
              
            
            Generators
          
        </span>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
          
<div class="md-search" data-md-component="search">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="Search" accesskey="s" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">close</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result" data-md-lang-search="">
          <div class="md-search-result__meta" data-md-lang-result-none="No matching documents" data-md-lang-result-one="1 matching document" data-md-lang-result-other="# matching documents">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/atomist/rug" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Rug
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    
      <i class="md-logo md-nav__button">
        <img src="../../../images/atomist-logo-horiz-reversed.svg">
      </i>
    
    The Atomist Documentation
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/atomist/rug" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      Rug
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-1" type="checkbox" id="nav-1">
    
    <label class="md-nav__link" for="nav-1">
      Overview
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-1">
        Overview
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../capabilities/" title="Capabilities" class="md-nav__link">
      Capabilities
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/prerequisites/" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/slack/" title="Connect Atomist to Slack" class="md-nav__link">
      Connect Atomist to Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/github/" title="Connect Atomist to GitHub" class="md-nav__link">
      Connect Atomist to GitHub
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Connect Atomist to CI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Connect Atomist to CI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/ci/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/travis-ci/" title="Travis CI" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/bot/" title="Atomist Bot" class="md-nav__link">
      Atomist Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../getting-started/what-next/" title="What next" class="md-nav__link">
      What next
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Tutorials
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Tutorials
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/setup-cli/" title="Setup Rug CLI" class="md-nav__link">
      Setup Rug CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/create-rug-project/" title="Create Rug Project" class="md-nav__link">
      Create Rug Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/setup-typescript/" title="Setup TypeScript" class="md-nav__link">
      Setup TypeScript
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/publish-rug-project/" title="Publish Rug Project" class="md-nav__link">
      Publish Rug Project
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../tutorials/add-bot-command/" title="Add Bot Command" class="md-nav__link">
      Add Bot Command
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      User Guide
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        User Guide
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" checked>
    
    <label class="md-nav__link" for="nav-4-2">
      Rug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        Rug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../event-handlers/" title="Event Handlers" class="md-nav__link">
      Event Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../command-handlers/" title="Command Handlers" class="md-nav__link">
      Command Handlers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../editors/" title="Editors" class="md-nav__link">
      Editors
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        Generators
      </label>
    
    <a href="./" title="Generators" class="md-nav__link md-nav__link--active">
      Generators
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-a-generator" title="Anatomy of a Generator" class="md-nav__link">
    Anatomy of a Generator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-generator-script" title="A Basic Generator Script" class="md-nav__link">
    A Basic Generator Script
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rug-functions/" title="Rug Functions" class="md-nav__link">
      Rug Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../secrets/" title="Secrets" class="md-nav__link">
      Secrets
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../path-expressions/" title="Path Expressions" class="md-nav__link">
      Path Expressions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../microgrammars/" title="Microgrammars" class="md-nav__link">
      Microgrammars
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../templates/" title="Templates" class="md-nav__link">
      Templates
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../tests/" title="Tests" class="md-nav__link">
      Tests
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../projects/" title="Projects" class="md-nav__link">
      Projects
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../archives/" title="Archives" class="md-nav__link">
      Archives
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lifecycle/" title="Lifecycle" class="md-nav__link">
      Lifecycle
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../runtime/" title="Runtime" class="md-nav__link">
      Runtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../conventions/" title="Conventions" class="md-nav__link">
      Conventions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Integrations
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/slack/" title="Slack" class="md-nav__link">
      Slack
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/github/" title="GitHub.com" class="md-nav__link">
      GitHub.com
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/travis-ci/" title="Travis CI" class="md-nav__link">
      Travis CI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../integrations/jenkins/" title="Jenkins" class="md-nav__link">
      Jenkins
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Interfaces
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Interfaces
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/bot/" title="Bot" class="md-nav__link">
      Bot
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4-3" type="checkbox" id="nav-4-4-3">
    
    <label class="md-nav__link" for="nav-4-4-3">
      CLI
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-4-3">
        CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/install/" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/basics/" title="Basics" class="md-nav__link">
      Basics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/using-rugs/" title="Using Rugs" class="md-nav__link">
      Using Rugs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../interfaces/cli/developing-rugs/" title="Developing Rugs" class="md-nav__link">
      Developing Rugs
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../fingerprints/" title="Fingerprints" class="md-nav__link">
      Fingerprints
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../seeds/" title="Seeds" class="md-nav__link">
      Seeds
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../spring-agent/" title="Spring Agent" class="md-nav__link">
      Spring Agent
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-8" type="checkbox" id="nav-4-8">
    
    <label class="md-nav__link" for="nav-4-8">
      Permissions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-8">
        Permissions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/slack/" title="Slack Scopes" class="md-nav__link">
      Slack Scopes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../permissions/github/" title="GitHub Scopes" class="md-nav__link">
      GitHub Scopes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Rug
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        Rug
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/extensions/" title="Extensions" class="md-nav__link">
      Extensions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug/path-expressions/" title="Path Expressions" class="md-nav__link">
      Path Expressions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../reference/rug-cli/" title="Rug CLI" class="md-nav__link">
      Rug CLI
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#anatomy-of-a-generator" title="Anatomy of a Generator" class="md-nav__link">
    Anatomy of a Generator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#a-basic-generator-script" title="A Basic Generator Script" class="md-nav__link">
    A Basic Generator Script
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Generators</h1>
                
                <p>Rug generators create new projects from an existing source project,
where the source project itself is a working project in its own right.
A Rug generator has two major components: the &ldquo;model&rdquo; project and the
modifications needed to transform the model project into a new
project.  The model project can be any working project you want to use
to create new projects.  The transformations are encoded in the Rug
generator script located under the project&rsquo;s <code>.atomist</code> directory.
Using these components, a generator does the followings:</p>
<ol>
<li>Copy the content of its host project, <code>.atomist</code> directory
    (and anything listed in <code>.atomist/ignore</code>)
    excluded, into the new target directory</li>
<li>Runs the generator&rsquo;s <code>populate</code> function against the contents of
    target directory</li>
</ol>
<p>Let&rsquo;s look more closely at what makes a project a Rug generator.</p>
<h2 id="anatomy-of-a-generator">Anatomy of a Generator<a class="headerlink" href="#anatomy-of-a-generator" title="Permanent link">&para;</a></h2>
<p>Suppose we have a model project our team clones to quickly get the skeleton of a
<a href="https://spring.io/guides/gs/rest-service/">Spring Bot Rest Service</a>.  The contents of the model project are
the following.</p>
<div class="codehilite"><pre><span></span><span class="go">~/workspace/spring-boot-rest-basic</span>
<span class="go">    ├── .gitignore</span>
<span class="go">    ├── pom.xml</span>
<span class="go">    ├── README.md</span>
<span class="go">    ├── src</span>
<span class="go">    │   ├── main</span>
<span class="go">    │   │   ├── java</span>
<span class="go">    │   │   │   └── com</span>
<span class="go">    │   │   │       └── company</span>
<span class="go">    │   │   │           ├── HomeController.java</span>
<span class="go">    │   │   │           ├── MyRestServiceApplication.java</span>
<span class="go">    │   │   │           └── MyRestServiceConfiguration.java</span>
<span class="go">    │   │   └── resources</span>
<span class="go">    │   │       ├── application.properties</span>
<span class="go">    │   │       └── logback.xml</span>
<span class="go">    │   └── test</span>
<span class="go">    │       └── java</span>
<span class="go">    │           └── com</span>
<span class="go">    │               └── company</span>
<span class="go">    │                   ├── MyRestServiceApplicationTests.java</span>
<span class="go">    │                   ├── MyRestServiceOutOfContainerIntegrationTests.java</span>
<span class="go">    │                   └── MyRestServiceWebIntegrationTests.java</span>
</pre></div>

<p>To convert out model project into a <a href="../projects/">Rug generator</a>, we can use the
<code>ConvertExistingProjectToGenerator</code> Rug editor in <a href="https://github.com/atomist-rugs/rug-editors#convertexistingprojecttogenerator">rug-editors</a> to
add all the necessary directories and files:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> rug edit atomist-rugs:rug-editors:ConvertExistingProjectToGenerator <span class="se">\</span>
    <span class="nv">archive_name</span><span class="o">=</span>spring-boot-service <span class="se">\</span>
    <span class="nv">group_id</span><span class="o">=</span>company-rugs <span class="se">\</span>
    <span class="nv">version</span><span class="o">=</span><span class="m">0</span>.13.0 <span class="se">\</span>
    <span class="nv">generator_name</span><span class="o">=</span>NewSpringBootService <span class="se">\</span>
    <span class="nv">description</span><span class="o">=</span><span class="s2">&quot;Rug generator for a Spring Boot REST service&quot;</span>
<span class="go">Processing dependencies</span>
<span class="go">  Downloading atomist-rugs/rug-editors/maven-metadata.xml ← rugs (740 bytes) succeeded</span>
<span class="go">  Downloading atomist-rugs/rug-editors/maven-metadata.xml ← global (740 bytes) succeeded</span>
<span class="go">  Downloading atomist-rugs/rug-editors/0.14.0/rug-editors-0.14.0.pom ← rugs (635 bytes) succeeded</span>
<span class="go">  Downloading atomist-rugs/rug-editors/0.14.0/rug-editors-0.14.0-metadata.json ← rugs (14 kb) succeeded</span>
<span class="go">  Downloading atomist-rugs/rug-editors/0.14.0/rug-editors-0.14.0.zip ← rugs (194 kb) succeeded</span>
<span class="go">Resolving dependencies for atomist-rugs:rug-editors:latest completed</span>
<span class="go">Loading atomist-rugs:rug-editors:0.14.0 into runtime completed</span>
<span class="go">  TypeScript files added, run `cd .atomist &amp;&amp; npm install`</span>

<span class="go">Running editor ConvertExistingProjectToGenerator of atomist-rugs:rug-editors:0.14.0 completed</span>

<span class="go">→ Project</span>
<span class="go">  ~/workspace/spring-boot-rest-basic (14 kb in 20 files)</span>

<span class="go">→ Changes</span>
<span class="go">  ├── .atomist/package.json created (57 bytes)</span>
<span class="go">  ├── .atomist/tsconfig.json created (627 bytes)</span>
<span class="go">  ├── .atomist/.gitignore created (27 bytes)</span>
<span class="go">  ├── .atomist/editors/NewSpringBootService.ts created (602 bytes)</span>
<span class="go">  ├── .atomist/tests/NewSpringBootService.rt created (153 bytes)</span>
<span class="go">  ├── .atomist/editors/NewSpringBootService.ts updated (580 bytes)</span>
<span class="go">  ├── .atomist/editors/NewSpringBootService.ts updated (583 bytes)</span>
<span class="go">  ├── .atomist/editors/NewSpringBootService.ts updated (584 bytes)</span>
<span class="go">  ├── .atomist/tests/NewSpringBootService.rt updated (155 bytes)</span>
<span class="go">  ├── .atomist/tests/NewSpringBootService.rt updated (880 bytes)</span>
<span class="go">  └── .atomist.yml created (2 kb)</span>
</pre></div>

<p>The <code>group_id</code> and <code>archive_name</code> parameters, coupled with the name of the Rug
generator, define the fully-qualified name of the <a href="../archives/">Rug archive</a> (the
published package of a Rug).</p>
<p>Once this is completed, the project should look like this:</p>
<div class="codehilite"><pre><span></span><span class="go">~/workspace/spring-boot-rest-basic</span>
<span class="hll"><span class="go">    ├── .atomist</span>
</span><span class="hll"><span class="go">    │   ├── editors</span>
</span><span class="hll"><span class="go">    │   │   └── NewSpringBootService.ts</span>
</span><span class="hll"><span class="go">    │   ├── .gitignore</span>
</span><span class="hll"><span class="go">    │   ├── package.json</span>
</span><span class="hll"><span class="go">    │   ├── tests</span>
</span><span class="hll"><span class="go">    │   │   ├── project</span>
</span><span class="hll"><span class="go">    │   │   │   ├── NewSpringBootService.feature</span>
</span><span class="hll"><span class="go">    │   │   └── └── Steps.ts</span>
</span><span class="hll"><span class="go">    │   └── tsconfig.json</span>
</span><span class="go">    ├── .atomist.yml</span>
<span class="go">    ├── .gitignore</span>
<span class="go">    ├── pom.xml</span>
<span class="go">    ├── .project</span>
<span class="go">    ├── README.md</span>
<span class="go">    ├── src</span>
<span class="go">    │   ├── main</span>
<span class="go">    │   │   ├── java</span>
<span class="go">    │   │   │   └── com</span>
<span class="go">    │   │   │       └── company</span>
<span class="go">    │   │   │           ├── HomeController.java</span>
<span class="go">    │   │   │           ├── MyRestServiceApplication.java</span>
<span class="go">    │   │   │           └── MyRestServiceConfiguration.java</span>
<span class="go">    │   │   └── resources</span>
<span class="go">    │   │       ├── application.properties</span>
<span class="go">    │   │       └── logback.xml</span>
<span class="go">    │   └── test</span>
<span class="go">    │       └── java</span>
<span class="go">    │           └── com</span>
<span class="go">    │               └── company</span>
<span class="go">    │                   ├── MyRestServiceApplicationTests.java</span>
<span class="go">    │                   ├── MyRestServiceOutOfContainerIntegrationTests.java</span>
<span class="go">    │                   └── MyRestServiceWebIntegrationTests.java</span>
</pre></div>

<p>The <code>.atomist</code> directory contains a metadata file, <code>package.json</code>,
defining characteristics of the project and declaring <a href="https://www.typescriptlang.org/">TypeScript</a>
dependencies, and has the Rug generator script and its associated test
in appropriate subdirectories.</p>
<div class="admonition note">
<p>Because all of the Atomist files are hidden under the <code>.atomist</code>
directory, our generator project is still a fully functioning,
perfectly valid Spring Boot project.</p>
</div>
<p>Let&rsquo;s take a close look at the Rug generator script.</p>
<h2 id="a-basic-generator-script">A Basic Generator Script<a class="headerlink" href="#a-basic-generator-script" title="Permanent link">&para;</a></h2>
<p>The generator script&rsquo;s <code class="codehilite"><span class="nx">populate</span></code> method is invoked after
the model project&rsquo;s files have been copied to the target project.  The default
contents of the generator script we added above look like the following:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">PopulateProject</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/ProjectGenerator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/model/Project&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Pattern</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/RugOperation&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Generator</span><span class="p">,</span> <span class="nx">Parameter</span><span class="p">,</span> <span class="nx">Tags</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/Decorators&#39;</span><span class="p">;</span>

<span class="kd">@Generator</span><span class="p">(</span><span class="s2">&quot;NewSpringBootService&quot;</span><span class="p">,</span> <span class="s2">&quot;Rug project for Spring Rest Services&quot;</span><span class="p">)</span>
<span class="kd">@Tags</span><span class="p">(</span><span class="s2">&quot;documentation&quot;</span><span class="p">)</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">NewSpringBootService</span> <span class="kr">implements</span> <span class="nx">PopulateProject</span> <span class="p">{</span>

    <span class="nx">populate</span><span class="p">(</span><span class="nx">project</span>: <span class="kt">Project</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Creating </span><span class="si">${</span><span class="nx">project</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">newSpringBootService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NewSpringBootService</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>After importing the TypeScript Rug typings for the elements we will be
using (lines 1&ndash;4), we use a <a href="https://www.typescriptlang.org/docs/handbook/decorators.html">decorator</a> to declare the
following class a generator (line 6).  The first argument to the
<code class="codehilite"><span class="kd">@Generator</span></code> decorator is the name of the generator.
This is the externally visible and discoverable name of the Rug.  This
name, along with the generators group and repository, form the
fully-qualified name of the generator.  The second argument to the
<code class="codehilite"><span class="kd">@Generator</span></code> decorator is a brief description of the
generator.  On line 7 we use the <code class="codehilite"><span class="kd">@Tags</span></code> decorator to
apply some tags to our generator so people can search for it more
easily.  Using the <code class="codehilite"><span class="kd">@Tags</span></code> decorator is optional but
highly recommended.</p>
<p>We define the class that will implement our generator on line 8.  A
generator implements the <code class="codehilite"><span class="nx">PopulateProject</span></code> interface.
This interface requires the <code class="codehilite"><span class="nx">populate</span><span class="p">(</span><span class="nx">Project</span><span class="p">)</span></code> method to
be defined, which we do on line 10 (more on that below).  It is
convention for the generator and the class that implements it to have
the same name.</p>
<p>In the last line of the generator script we export an instance of that
generator to make it visible to the Rug runtime when it executed (line 15).
Like the generator class name, the name of the <code class="codehilite"><span class="kr">const</span></code>
does not matter, but it is convention to use the generator/class name,
lower-casing the first letter.</p>
<p>As explained earlier, a generator copies the content of the project where it
lives into a target directory before applying changes. The definition of our
generator currently performs only the copy (this is done automatically for us).
Let&rsquo;s now amend the generator to modify the copied contents, for example to
change the name of the copied class. An action users would likely do manually.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">PopulateProject</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/ProjectGenerator&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/model/Project&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">File</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/model/File&#39;</span><span class="p">;</span>
</span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Pattern</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/RugOperation&#39;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Generator</span><span class="p">,</span> <span class="nx">Parameter</span><span class="p">,</span> <span class="nx">Tags</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/operations/Decorators&#39;</span><span class="p">;</span>
<span class="hll"><span class="kr">import</span> <span class="p">{</span> <span class="nx">PathExpressionEngine</span> <span class="p">}</span> <span class="nx">from</span> <span class="s1">&#39;@atomist/rug/tree/PathExpression&#39;</span><span class="p">;</span>
</span>
<span class="kd">@Generator</span><span class="p">(</span><span class="s2">&quot;NewSpringBootService&quot;</span><span class="p">,</span> <span class="s2">&quot;Rug project for Spring Rest Services&quot;</span><span class="p">)</span>
<span class="kd">@Tags</span><span class="p">(</span><span class="s2">&quot;documentation&quot;</span><span class="p">)</span>
<span class="kr">export</span> <span class="kr">class</span> <span class="nx">NewSpringBootService</span> <span class="kr">implements</span> <span class="nx">PopulateProject</span> <span class="p">{</span>

    <span class="kd">@Parameter</span><span class="p">({</span>
        <span class="nx">displayName</span><span class="o">:</span> <span class="s2">&quot;Class Name&quot;</span><span class="p">,</span>
        <span class="nx">description</span><span class="o">:</span> <span class="s2">&quot;name for the service class&quot;</span><span class="p">,</span>
        <span class="nx">pattern</span>: <span class="kt">Pattern.java_class</span><span class="p">,</span>
        <span class="nx">validInput</span><span class="o">:</span> <span class="s2">&quot;a valid Java class name, which contains only alphanumeric characters, $ and _ and does not start with a number&quot;</span><span class="p">,</span>
        <span class="nx">minLength</span>: <span class="kt">1</span><span class="p">,</span>
        <span class="nx">maxLength</span>: <span class="kt">50</span><span class="p">,</span>
        <span class="nx">required</span>: <span class="kt">false</span>
    <span class="p">})</span>
    <span class="nx">service_class_name</span>: <span class="kt">string</span><span class="p">;</span>

    <span class="nx">populate</span><span class="p">(</span><span class="nx">project</span>: <span class="kt">Project</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="sb">`Creating </span><span class="si">${</span><span class="nx">project</span><span class="p">.</span><span class="nx">name</span><span class="si">}</span><span class="sb">`</span><span class="p">);</span>

<span class="hll">        <span class="kd">let</span> <span class="nx">eng</span>: <span class="kt">PathExpressionEngine</span> <span class="o">=</span> <span class="nx">project</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">pathExpressionEngine</span>
</span><span class="hll">        <span class="nx">eng</span><span class="p">.</span><span class="kd">with</span><span class="o">&lt;</span><span class="nx">File</span><span class="o">&gt;</span><span class="p">(</span><span class="nx">project</span><span class="p">,</span> <span class="s1">&#39;/src//File()[contains(@name, &quot;MyRestService&quot;)]&#39;</span><span class="p">,</span> <span class="nx">f</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span><span class="hll">            <span class="nx">f</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;MyRestService&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">service_class_name</span><span class="p">);</span>
</span><span class="hll">            <span class="nx">f</span><span class="p">.</span><span class="nx">setPath</span><span class="p">(</span><span class="nx">f</span><span class="p">.</span><span class="nx">path</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s2">&quot;MyRestService&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">service_class_name</span><span class="p">));</span>
</span><span class="hll">        <span class="p">});</span>
</span>    <span class="p">}</span>
<span class="p">}</span>

<span class="kr">export</span> <span class="kr">const</span> <span class="nx">newSpringBootService</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">NewSpringBootService</span><span class="p">();</span>
</pre></div>
</td></tr></table>

<p>Rugs, like typical methods, often take parameters to customize their
behavior.  Generators have a required parameter: the name of the
project that will be generated.  The project name parameter is
automatically defined for a generate.  All other parameters used by
the generator must be declared.  Parameters are declared using the
<code class="codehilite"><span class="kd">@Parameter</span></code> decorator (line 10).  The <code class="codehilite"><span class="kd">@Parameter</span></code> decorator provides the metadata for the parameter while
the subsequent instance variable declaration provides the name and
default value, if any.  The <code class="codehilite"><span class="kd">@Parameter</span></code> decorator
accepts a single argument, a JavaScript object.  The JavaScript object
passed to <code class="codehilite"><span class="kd">@Parameter</span></code> accepts all of the property names
shown above, but only <code>pattern</code> is mandatory.  The <code>pattern</code> property
provides an anchored regular expression used to validate user input.
Here we use one the Atomist pre-defined <code class="codehilite"><span class="nx">Pattern</span></code>s (line
13).  Despite the fact that the other <code class="codehilite"><span class="kd">@Parameter</span></code>
properties are option, it is highly recommended to provide them to
help consumers of your generator.</p>
<p>The <code class="codehilite"><span class="nx">populate</span></code> method takes a single argument, a
<code class="codehilite"><span class="nx">Project</span></code> object.  The <code class="codehilite"><span class="nx">Project</span></code> provided to
this method contains the contents of the generated project, i.e., all
the files copied from the generator project.  Using this object, you
can alter the exact copy of the original project as appropriate so the
result is the new project with the desired contents.  To effect your
desired changes, you have the power of TypeScript and the Rug
programming model.</p>
<p>In that regards, as Atomist comprehends filesystem and code structure, the Rug
programming model offers a powerful mechanism to make the above example a lot
less brittle through <a href="../path-expressions/">path expressions</a>. In this generator script, we query
the filesystem for all files containing a specific token in their names
(line 27). Then for each one of these files, we replace its content (line 28)
and move it to different path (line 29).</p>
<p>Rugs should be tested as any other pieces of software, Rug and its runtime
natively supports a <a href="../tests/">BDD-centric testing approach</a>, based on the
Gherkin DSL.</p>
<p>The test for our generator could be described as follows in
<code>.atomist/tests/NewSpringBootService.feature</code>:</p>
<div class="codehilite"><pre><span></span><span class="k">Feature:</span><span class="nf"> Creating new Spring Rest Service projects</span>

<span class="k">Scenario:</span><span class="nf"> A default Spring Rest project structure should be generated</span>
<span class="k"> Given </span><span class="nf">an empty project</span>

<span class="nf"> </span><span class="k">When </span><span class="nf">running the Spring Boot Service generator</span>

<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the application file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the configuration file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the application tests file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the integration tests file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the web integration tests file is changed</span>

<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the class in the application file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the class in the configuration file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the class in the application tests file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the class in the integration tests file is changed</span>
<span class="nf"> </span><span class="k">Then </span><span class="nf">the name of the class in the web integration tests is changed</span>
</pre></div>

<p>Implemented by the steps in <code>.atomist/tests/Steps.ts</code> file:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kr">import</span> <span class="p">{</span> <span class="nx">Given</span><span class="p">,</span> <span class="nx">When</span><span class="p">,</span> <span class="nx">Then</span><span class="p">,</span> <span class="nx">ProjectScenarioWorld</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/project/Core&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Result</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/test/Result&quot;</span><span class="p">;</span>
<span class="kr">import</span> <span class="p">{</span> <span class="nx">Project</span> <span class="p">}</span> <span class="nx">from</span> <span class="s2">&quot;@atomist/rug/model/Project&quot;</span><span class="p">;</span>

<span class="nx">Given</span><span class="p">(</span><span class="s2">&quot;an empty project&quot;</span><span class="p">,</span> <span class="nx">p</span> <span class="o">=&gt;</span> <span class="p">{})</span>

<span class="nx">When</span><span class="p">(</span><span class="s2">&quot;running the Spring Boot Service generator&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">,</span> <span class="nx">world</span>: <span class="kt">ProjectScenarioWorld</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">generator</span> <span class="o">=</span> <span class="nx">world</span><span class="p">.</span><span class="nx">generator</span><span class="p">(</span><span class="s2">&quot;NewSpringBootService&quot;</span><span class="p">);</span>
  <span class="nx">world</span><span class="p">.</span><span class="nx">generateWith</span><span class="p">(</span><span class="nx">generator</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;service_class_name&quot;</span><span class="o">:</span> <span class="s2">&quot;CalendarService&quot;</span><span class="p">});</span>
<span class="p">})</span>

<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the application file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarServiceApplication.java&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the configuration file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarServiceConfiguration.java&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the application tests file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceApplicationTests.java&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the integration tests file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceOutOfContainerIntegrationTests.java&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the web integration tests file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">fileExists</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceWebIntegrationTests.java&quot;</span><span class="p">)</span>
<span class="p">)</span>

<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the class in the application file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarServiceApplication.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarServiceApplication&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the class in the configuration file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/main/java/com/company/CalendarServiceConfiguration.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarServiceConfiguration&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the class in the application tests file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceApplicationTests.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarServiceApplicationTests&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the class in the integration tests file is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceOutOfContainerIntegrationTests.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarServiceOutOfContainerIntegrationTests&quot;</span><span class="p">)</span>
<span class="p">)</span>
<span class="nx">Then</span><span class="p">(</span><span class="s2">&quot;the name of the class in the web integration tests is changed&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">p</span>: <span class="kt">Project</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">p</span><span class="p">.</span><span class="nx">findFile</span><span class="p">(</span><span class="s2">&quot;src/test/java/com/company/CalendarServiceWebIntegrationTests.java&quot;</span><span class="p">).</span><span class="nx">contains</span><span class="p">(</span><span class="s2">&quot;CalendarServiceWebIntegrationTests&quot;</span><span class="p">)</span>
<span class="p">)</span>
</pre></div>
</td></tr></table>

<p>If you&rsquo;re not familiar with this approach, the
<code>.atomist/tests/NewSpringBootService.feature</code> describes our tests in a set of
hypotheses and expectations. All those steps are implemented in the
<code>.atomist/tests/Steps.ts</code> file which is executed when the test is run:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> rug <span class="nb">test</span>
<span class="go">Resolving dependencies for com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="go">Invoking TypeScript Compiler on ts script sources</span>
<span class="go">  Created .atomist/tests/Steps.js.map</span>
<span class="go">  Created .atomist/tests/Steps.js</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js.map</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js</span>
<span class="go">Processing script sources completed</span>
<span class="go">Loading com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="go">  Executing feature Creating new Spring Rest Service projects</span>
<span class="go">    Executing test scenario A default Spring Rest project structure should be generated</span>
<span class="go">  Creating project_name</span>
<span class="go">Running tests in com.company.rugs:spring-boot-service:0.13.0:local completed</span>

<span class="go">Successfully executed 1 of 1 test: Test SUCCESS</span>
</pre></div>

<p>Assuming we change one of the hypotheses to make it fail, <code>rug</code> would notify us
with a relevant error message:</p>
<div class="codehilite"><pre><span></span><span class="gp">$</span> rug <span class="nb">test</span>
<span class="go">Resolving dependencies for com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="go">Invoking TypeScript Compiler on ts script sources</span>
<span class="go">  Created .atomist/tests/Steps.js.map</span>
<span class="go">  Created .atomist/tests/Steps.js</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js</span>
<span class="go">  Created .atomist/editors/NewSpringBootService.js.map</span>
<span class="go">Processing script sources completed</span>
<span class="go">Loading com.company.rugs:spring-boot-service:0.13.0:local completed</span>
<span class="go">  Executing feature Creating new Spring Rest Service projects</span>
<span class="go">    Executing test scenario A default Spring Rest project structure should be generated</span>
<span class="go">  Creating project_name</span>
<span class="go">Running tests in com.company.rugs:spring-boot-service:0.13.0:local completed</span>

<span class="go">→ Test Report</span>
<span class="go">  Failures</span>
<span class="go">  └─┬ Creating new Spring Rest Service projects</span>
<span class="go">    └─┬ A default Spring Rest project structure should be generated</span>
<span class="go">      ├─┬ the name of the application file is changed: Failed</span>
<span class="go">      | └── function (p) {</span>
<span class="go">    return p.fileExists(&quot;src/main/java/com/company/CalndarServiceApplication.java&quot;);</span>
<span class="go">}</span>
<span class="go">      ├── the name of the application tests file is changed: Passed</span>
<span class="go">      ├── the name of the class in the application file is changed: Passed</span>
<span class="go">      ├── the name of the class in the application tests file is changed: Passed</span>
<span class="go">      ├── the name of the class in the configuration file is changed: Passed</span>
<span class="go">      ├── the name of the class in the integration tests file is changed: Passed</span>
<span class="go">      ├── the name of the class in the web integration tests is changed: Passed</span>
<span class="go">      ├── the name of the configuration file is changed: Passed</span>
<span class="go">      ├── the name of the integration tests file is changed: Passed</span>
<span class="go">      └── the name of the web integration tests file is changed: Passed</span>

<span class="go">Unsuccessfully executed 1 of 1 test: Test FAILURE</span>
</pre></div>

<p>As you can see, Rug generator scripts are simple functions that apply
changes against a freshly copy of your its content. This changes may be
parametarized to tailor the result to the user&rsquo;s expectations. Finally,
following a test-driven approach, generators can be quickly validated before
being released.</p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../editors/" title="Editors" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Editors
              </span>
            </div>
          </a>
        
        
          <a href="../rug-functions/" title="Rug Functions" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Rug Functions
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            &copy; 2017 Atomist, Inc.
          </div>
        
        powered by
        <a href="http://www.mkdocs.org" title="MkDocs">MkDocs</a>
        and
        <a href="http://squidfunk.github.io/mkdocs-material/" title="Material for MkDocs">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="https://the-composition.com/" class="md-footer-social__link fa fa-medium"></a>
    
      <a href="https://github.com/atomist" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/atomist" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://join.atomist.com/" class="md-footer-social__link fa fa-slack"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application-c35428f87f.js"></script>
      
      
      <script>app.initialize({url:{base:"../../.."}})</script>
      
    
    
      
      <script>!function(e,t,a,n,o,c,i){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,c=t.createElement(a),i=t.getElementsByTagName(a)[0],c.async=1,c.src=n,i.parentNode.insertBefore(c,i)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-74966852-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var t=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",t,e.href)})});var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})</script>
      
    
  </body>
</html>